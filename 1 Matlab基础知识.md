# Matlab系统环境
## Matlab操作界面的组成
1. 一行不够时，可以分两行
2. 设置工作文件夹
```
cd directory 
```
## Matlab的搜索路径
先 变量名   
再 函数名   
最后 文件
>文件搜索顺序：   
先搜索当前文件夹，   
   再搜索文件搜索路径中的文件   
> 设置文件搜索路径：
```path(path,'directory')```
   
        
        
# Matlab数值数据

## 整形
分为有符号数和无符号数
>例：类型转换

```
x= int8(129)    %有符号数
x=
    127
    
x=uint8(129)    %无符号数     
x=
    129
```

## 浮点型
分为单精度型（4个字节）和双精度型（8个字节）   
数值默认double

```
single()    % 将其他类型数据转换为单精度型
double()    % 将其他类型数据转换为双精度型
class()     % 得数据类型
```
## 复型
包含实部和虚部两个部分，实部和虚部默认为双精度型
```
real()  % 求复数实部
imag()  % 求复数虚部
```

## 设置数据的输出格式
```
>>format long 
>>50/3   
% 以long格式输出50/3的值
```
```
>>format
>>50/3   
% 以原有格式输出50/3的值
```
>format命令只影响数据输出格式，不影响计算和存储。

# 常用数学函数
* 函数调用格式：
```
函数名（函数自变量的值）
```
* 函数自变量为**矩阵变量**或**标量**。
* 运算结果为与自变量同形的矩阵。


## 三角函数
以角度为单位的函数在函数名后加d
```
sind()
```

## abs函数
求绝对值/模/ASCII码值

## 取整函数 fix/floor/ceil/round
* floor()：向下取整
* ceil()：向上取整
* fix()：舍小数取整 
* round()： 四舍五入取整

## mod函数和rem函数
mod函数用于取模运算，rem函数用于取余运算
```
M = mod(x,y) 
 % 返回用 y 除以 x 后的余数，其中 x 是被除数，y 是除数
```

```
M = rem(x,y)

% 返回用 y 除以 x 后的余数，其中 x 是被除数，y 是除数(与mod一致)
```

区别：
* mod函数与rem函数都是计算余数，只是两者的计算方式不同。
* mod函数与rem函数各有其用途，如在进行信号处理时，mod函数可在周期信号上下文中使用，因为其输出是周期性的（周期等于除数）。
* 当x,y的符号相同时，mod函数与rem函数的结果相同；只有当x,y符号不同时，mod函数与rem函数才会表现出结果不同。
* mod函数返回结果的符号与除数 y 是一致的，rem函数返回结果的符号与被除数 x 是一致的。
* 当y=0时，mod函数遵从mod(x,0)返回 x 的约定，而rem函数遵从rem(x,0)返回 NaN 的约定。



## isprime(n) 函数
n为素数时返回1，否则返回0

## 函数应用举例
> 求345的个十百位的数字
```
m= 345;
m1= rem(m,10)
m2= rem(fix(m/10),10)
m3= fix(m/100)
```

> 求[1,100]区间所有素数
```
x = 1:100;
k= isprime(x);
k1=find(k); % find函数返回k中非零向量元素的序号
p=x(k1)
```

# 变量及其操作
* 区分大小写
* 以字母开头
* 函数名和变量名用小写
* 无变量名则赋值默认变量ans


>例题：计算表达式的值，并将结果赋给变量z，然后显示计算结果。
```
x=sqrt(7)- 2i;
y=exp(pi/2);
z=(5+cosd(47))/(1+abs(x-y))
```

## 预定义变量
* ans是默认赋值变量
* i和j代表虚数单位
* pi代表圆周率 
* NaN代表非数（Not a Number）
> 绘图时，要裁掉的数据设置为NaN


## 变量的管理
* 在工作区窗口中修改、删除变量
* ```who```命令可以显示已有变量
* ```whos``` 命令可以显示变量详情
### 内存变量文件 *.mat
```save```命令创建内存变量文件
```load```命令装入内存变量文件
```
save mydata a x %生成mydata.mat文件于.m文件同名路径下
load mydata % 导入a和x两个变量
```


# Matlab矩阵的表示
## 矩阵的建立
### 直接输入法建立矩阵
```
A=[1,2,3;4,5,6;7,8,9]

>> A =

     1     2     3
     4     5     6
     7     8     9
```

### 利用已经建好的矩阵建立更大的矩阵
``` 
A=[1,2,3;4,5,6;7,8,9];
B=[-1,-2,-3;-4,-5,-6;-7,-8,-9];
C=[A,B;B,A]


>> C =

     1     2     3    -1    -2    -3
     4     5     6    -4    -5    -6
     7     8     9    -7    -8    -9
    -1    -2    -3     1     2     3
    -4    -5    -6     4     5     6
    -7    -8    -9     7     8     9
```

### 利用实部矩阵和虚部矩阵构成复数矩阵
```
B=[1,2,3;4,5,6];
C=[6,7,8;9,10,11];
A=B+i*C;
A

>>A =

   1.0000 + 6.0000i   2.0000 + 7.0000i   3.0000 + 8.0000i
   4.0000 + 9.0000i   5.0000 +10.0000i   6.0000 +11.0000i
```

## 产生行向量的方法
行向量形式为：```[1     2     3     4     5]```
### 冒号表达式e1:e2:e3
格式：
```
 e1:e2:e3
```
初始值:步长:终止值

* 省略步长e2时，默认步长为1


### linspace()函数
```
linspace(首元素,末元素,元素总数n)
```
* n缺省值为100，即产生100个元素
* 会将首末元素中间的值均分为n线性递增


## 结构矩阵和单元矩阵
### 结构矩阵（Structure)
* 每个元素都是有名字的
* 数组名.域名可以访问结构数组的具体元素值
* 格式：```结构矩阵元素.成员名=表达式```
```
a(1).x1=10;
a(1).x2='liu';
a(1).x3=[11,21;34,78];
a

 >> 包含以下字段的 struct:

    x1: 10
    x2: 'liu'
    x3: [2×2 double]
```
> 编者注：可以按Python的列表，C的结构体来理解

### 单元矩阵（Cell）
* 单元矩阵也是把不同数据类型放在一个变量中
* 但是没有名字，只能通过索引取得值
* 参考资料：[CSDN，Matlab单元数组(cell)和结构体(structure)](https://blog.csdn.net/qq_32865355/article/details/80232982?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task)
```
b= {10,'liu',[11,21;34,78];12,'wang',[34,191;27,578];...
14,'cai',[13,890;67,231]}

>> b =

[10] 'liu' [2x2 double]
[12] 'wang' [2x2 double]
[14] 'cai' [2x2 double]
```

```
%也可以这样创建（源自CSDN链接）
%按单元索引法赋值
A(1,1)={[1 3 5;2 4 6; 1 4 7]};
A(1,2)={3+5i};
A(2,1)={‘Tsinghua in Beijing’};
A(2,2)={0:pi/5:pi};
A

>> A =
[3x3double] [3.0000+5.0000i]
‘Tsinghua in Beijing’ [1x6 double]
```

# 矩阵元素的引用
## 引用单元素方式
### 1.下标引用
```
A(m,n)
% 代表A矩阵的第m行n列元素（Matlab下标从1开始）
```


```
A=[1,2,3;4,5,6];
A(4,5)=10

>>A =

     1     2     3     0     0
     4     5     6     0     0
     0     0     0     0     0
     0     0     0     0    10
% 如果A越界的下标被赋值，矩阵会自动扩充
```

### 2.矩阵元素序号来引用
* Matlab中，矩阵元素按列存储。即先存储第一列，再存储第二列，...
* 矩阵的序号就是**矩阵元素在内存中的排列顺序**。

```
A=[1,2,3;4,5,6];
A(3)

>>ans =

     2
```

### 序号（index）和行列下标（subscript）的转化sub2ind/ind2sub
```
D=sub2ind(S,I,J) %行列下标变为序号
>> A=[1:3;4:6]
A =
1 2 3
4 5 6
>> D=sub2ind(size(A),[1,2;2,2],[1,1;3,2])
D =
1 2
6 4
```
```
[I,J]= ind2sub(S,D) %序号变为行列下标
>> [I,J]=ind2sub([3,3],[1,3,5])
I =
1 3 2
J =
1 1 2
```

S: 行数和列数组成的向量，可用```size()```获取   
I：转换矩阵元素的行下标  
J：转换矩阵元素的列下标   
D：序号组成的矩阵   

## 利用冒号表达式获得子矩阵
```
A(i,:)  % 第i行的全部元素
A(:,j)  % 第j列的全部元素
A(i:i+m,k:k+m)   % 第i～i+m行内且在第k～k+m列中的所有元素
A(i:i+m,:)  % 第i～i+m行的全部元素
```
 end运算符:表示某一维矩阵的末尾元素的下标

# 利用空矩阵删除矩阵的元素
空矩阵：没有任何元素的矩阵`x=[]`
将不需要的元素设置为空矩阵
```
A=[1,2,3,4,5;6,7,8,9,10;11,12,13,14,15]
A(2,:)=[]

>> A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15


A =

     1     2     3     4     5
    11    12    13    14    15
```
## 改变矩阵的形状
`reshape(A,m,n)`将矩阵A重排为m*n的矩阵   
* 不改变元素个数和存储顺序


### 堆叠矩阵为列向量
`A(:)`

# Matlab基本运算
## 算数运算
* 除法分为右除/和左除\
```
B*inv(A) % 右除/
inv(A)*B % 左除\
```

##点运算
```
.*
./
.\
.^
```
* 要求对应元素进行相关运算，两矩阵要同型


## 关系运算
`~=`不等于

* 当比较的量是两个同型矩阵时，是对应位置元素按标量关系运算规则逐个进行
* 比较的一个量是标量，另一个是矩阵时，把标量与矩阵每一个量进行比较


>建立3阶方阵A，判断A的元素是否为偶数
``` 
A = [24,35,13;22,63,23;39,47,80]
 P=(rem(A,2)==0)

>> P =

  3×3 logical 数组

   1   0   0
```

## 逻辑运算
` & | ~`
*  a&b a、b全为非零时，运算结果为1，否则为0。
* a|b a、b中只要有一个为非零时，运算结果为1 。
* ～a 当a为零时，运算结果为1；当a为非零时，运算结果为0


>水仙花数是指各位数字的立方之和等于该数本身的三位正整数。求全部水仙花数。
```
A=[100:999];
X=rem(A,10);
Y=rem(fix(A/10),10);
Z=fix(A/100);
k=find(A==X.*X.*X+Y.*Y.*Y+Z.*Z.*Z);
A(k)


>> ans =

   153   370   371   407

```
## 优先级
算数运算>关系运算>逻辑运算（除逻辑非）  
单目运算>双目运算

# 字符串处理
* 字符串： 单引号括起来的字符序列
```
>> xm='Central South University'
>> xm(1:3)
ans =
Cen
```
* 字符串中的单引号用两个单引号来表示

## 字符串矩阵
- 要求字符串字符个数相同
```
>> ch=['abcdef';'123456'];
>> ch(2,3)
ans =
3
```


>例1  建立一个字符串向量，然后对该向量做如下处理：   
① 取第1～5个字符组成的子字符串。   
② 将字符串倒过来重新排列。   
③ 将字符串中的小写字母变成相应的大写字母，其余字符不变。   
④ 统计字符串中小写字母的个数。

```
ch='ABc123d4e56Fg9';
c1=ch(1:5)
c2=ch(end:-1:1)
k=find(ch>='a'&ch<='z');
ch(k)=ch(k)-('a'-'A')
length(k)

c1 =

    'ABc12'


c2 =

    '9gF65e4d321cBA'


ch =

    'ABC123D4E56FG9'


ans =

     4
```

## 字符串的操作
```
eval(s) % 把参数字符串的内容作为Matlab命令执行
char(s) % 把数值转化为ASCII码
```

## 字符串的比较
### 关系运算符比较
- 字符串长度相同时，按ASCII码逐个比较

### 函数比较
- `strcmp(s1,s2)`：用来比较字符串s1和s2是否相等，如果相等，返回结果为1，否则
返回0。
- `strncmp(s1,s2,n)`：用来比较两个字符串前n个字符是否相等，如果相等，返回1，
否则返回0。
- `strcmpi(s1,s2)`：在忽略字母大小写前提下，比较字符串s1和s2是否相等，如果相
等，返回1，否则返回0。
- `strncmpi(s1,s2,n)`：在忽略字符串大小写前提下，比较两个字符串前n个字符是否
相等，如果相等，返回1，否则返回0。


## 字符串的查找与替换

- `findstr(s1,s2)`：返回短字符串在长字符串中的开始位置。
- `strrep(s1,s2,s3)`：将字符串s1中的所有子字符串s2替换为字符串s3。
